<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>График магнитной индукции</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<canvas id="chart"></canvas>
<label for="radius">Радиус катушек (м):</label>
<input type="number" id="radius" value="1">
<label for="coilsNum">Количество витков:</label>
<input type="number" id="coilsNum" value="1">
<label for="amperage">Сила тока (А):</label>
<input type="number" id="amperage" value="1">
<button onclick="update()">Обновить</button>
<script>
  const context = document.getElementById('chart').getContext('2d');

  function calculate(x, r, n, I) {
    return ((4e-7 * Math.PI * I * r ** 2 * n) / 2) * ((1 / (x ** 2 + r ** 2) ** (3 / 2)) + (1 / ((x - r) ** 2 + r ** 2) ** (3 / 2)));
  }

  const chart = new Chart(context, {
    type: 'line',
    data: {
      labels: [],
      datasets: [{
        label: 'Магнитная индукция B(x)',
        data: [],
        borderWidth: 2,
        fill: false
      }]
    },
    options: {
      scales: {
        x: {
          type: 'linear',
          position: 'bottom'
        },
        y: {
          type: 'linear',
          position: 'left'
        }
      }
    }
  });

  function update() {
    const radius = parseFloat(document.getElementById('radius').value);
    const coilsNum = parseFloat(document.getElementById('coilsNum').value);
    const amperage = parseFloat(document.getElementById('amperage').value);

    const n = 1000;
    const Xs = Array.from({length: n}, (_, i) => i / 5 - n / 10);
    const Ys = Xs.map(x => calculate(x, radius, coilsNum, amperage));

    chart.data.labels = Xs;
    chart.data.datasets[0].data = Ys;
    chart.update();
  }

  update();
</script>
</body>
</html>
